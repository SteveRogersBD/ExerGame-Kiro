openapi: 3.0.3
info:
  title: Exergame API
  version: 1.0.0
servers:
  - url: http://localhost:8080
paths:
  /parent/{parentId}/child:
    get:
      tags:
        - Child
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Child"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: parentId
          required: true
          schema:
            type: integer
            format: int64
    post:
      tags:
        - Child
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Child"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: parentId
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: string
  /parent/{parentId}/child/{id}:
    get:
      tags:
        - Child
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Child"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: parentId
          required: true
          schema:
            type: integer
            format: int64
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
    put:
      tags:
        - Child
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Child"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: parentId
          required: true
          schema:
            type: integer
            format: int64
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Child"
    delete:
      tags:
        - Child
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: parentId
          required: true
          schema:
            type: integer
            format: int64
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /parent/{parentId}/child/{id}/moves/last-week:
    get:
      tags:
        - Child
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Move"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: parentId
          required: true
          schema:
            type: integer
            format: int64
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /parent/{parentId}/child/{id}/moves/last-month:
    get:
      tags:
        - Child
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Move"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: parentId
          required: true
          schema:
            type: integer
            format: int64
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /homework:
    get:
      tags:
        - Homework
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Homework"
        "400":
          description: Bad Request
        "404":
          description: Not Found
    post:
      tags:
        - Homework
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Homework"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: string
  /homework/child/{childId}/all:
    get:
      tags:
        - Homework
      summary: Get all homework for a child (most recent first)
      parameters:
        - in: path
          name: childId
          required: true
          schema:
          type: integer
          format: int64
          description: ID of the child
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/HomeworkDTO"
        "404":
          description: Child not found

  /homework/{id}:
    get:
      tags:
        - Homework
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Homework"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
    put:
      tags:
        - Homework
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Homework"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Homework"
    delete:
      tags:
        - Homework
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /move:
    get:
      tags:
        - Move
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Move"
        "400":
          description: Bad Request
        "404":
          description: Not Found
    post:
      tags:
        - Move
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Move"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Move"
  /move/{id}:
    get:
      tags:
        - Move
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Move"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
    put:
      tags:
        - Move
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Move"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Move"
    delete:
      tags:
        - Move
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /move/last7days/{childId}:
    get:
      tags:
        - Move
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
  /move/last30days/{childId}:
    get:
      tags:
        - Move
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
  /parent:
    get:
      tags:
        - Parent
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Parent"
        "400":
          description: Bad Request
        "404":
          description: Not Found
    post:
      tags:
        - Parent
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Parent"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: string
  /parent/{id}:
    get:
      tags:
        - Parent
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Parent"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
    put:
      tags:
        - Parent
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Parent"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Parent"
    delete:
      tags:
        - Parent
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /parent/signin:
    post:
      tags:
        - Parent
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Parent"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: string
  /video/{videoId}/question:
    get:
      tags:
        - Question
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Question"
        "400":
          description: Bad Request
        "404":
          description: Not Found
    post:
      tags:
        - Question
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Question"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: videoId
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Question"
  /video/{videoId}/question/{id}:
    get:
      tags:
        - Question
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Question"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
    put:
      tags:
        - Question
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Question"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
        - in: path
          name: videoId
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Question"
    delete:
      tags:
        - Question
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /video/{videoId}/question/question-set:
    post:
      tags:
        - Question
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Question"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: videoId
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/Question"
  /score:
    get:
      tags:
        - Score
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Score"
        "400":
          description: Bad Request
        "404":
          description: Not Found
    post:
      tags:
        - Score
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Score"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Score"
  /score/{id}:
    get:
      tags:
        - Score
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Score"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
    put:
      tags:
        - Score
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Score"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Score"
    delete:
      tags:
        - Score
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /score/{childId}/last-week/average:
    get:
      tags:
        - Score
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: number
                format: double
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
  /score/{childId}/last-week/grade:
    get:
      tags:
        - Score
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
  /score/{childId}/last-month/average:
    get:
      tags:
        - Score
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: number
                format: double
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
  /score/{childId}/last-month/grade:
    get:
      tags:
        - Score
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
  /session:
    get:
      tags:
        - Session
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Session"
        "400":
          description: Bad Request
        "404":
          description: Not Found
    post:
      tags:
        - Session
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Session"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Session"
  /session/{id}:
    get:
      tags:
        - Session
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Session"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
    put:
      tags:
        - Session
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Session"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Session"
    delete:
      tags:
        - Session
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /session/{childId}/last-month/total-hour:
    get:
      tags:
        - Session
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: integer
                format: int32
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
  /session/{childId}/recent:
    get:
      tags:
        - Session
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Session"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
  /video:
    get:
      tags:
        - Video
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Video"
        "400":
          description: Bad Request
        "404":
          description: Not Found
    post:
      tags:
        - Video
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Video"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Video"
  /video/{id}:
    get:
      tags:
        - Video
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Video"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
    put:
      tags:
        - Video
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Video"
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Video"
    delete:
      tags:
        - Video
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
            format: int64
  /homework/{childId}/all:
    get:
      tags:
        - Homework
      summary: Get all homework for a child (most recent first)
      parameters:
        - in: path
          name: childId
          required: true
          schema:
            type: integer
            format: int64
          description: ID of the child
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Homework"
        "404":
          description: Child not found
components:
  schemas:
    Child:
      type: object
      properties:
        id:
          type: integer
          format: int64
        fullName:
          type: string
        dateOfBirth:
          type: string
          format: date
        age:
          type: string
        dp:
          type: string
        createdAt:
          type: string
          format: date-time
        pin:
          type: string
      required:
        - dateOfBirth
        - fullName
    Homework:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        status:
          type: string
      required:
        - title
    HomeworkDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        url:
          type: string
        videoId:
          type: integer
          format: int64
        status:
          type: string

    Move:
      type: object
      properties:
        id:
          type: integer
          format: int64
        type:
          type: string
        createdAt:
          type: string
          format: date-time
    Parent:
      type: object
      properties:
        id:
          type: integer
          format: int64
        fullName:
          type: string
        username:
          type: string
        email:
          type: string
        password:
          type: string
        dp:
          type: string
        createdAt:
          type: string
          format: date-time
      required:
        - email
        - fullName
        - password
        - username
    Question:
      type: object
      properties:
        id:
          type: integer
          format: int64
        question:
          type: string
        timeToStop:
          type: string
        optA:
          type: string
        optB:
          type: string
        optC:
          type: string
        correctAns:
          type: string
      required:
        - correctAns
        - optA
        - optB
        - optC
        - question
        - timeToStop
    Score:
      type: object
      properties:
        id:
          type: integer
          format: int64
        child:
          type: string
        video:
          type: string
        score:
          type: integer
          format: int32
        percentage:
          type: number
          format: double
      required:
        - percentage
        - score
    Session:
      type: object
      properties:
        id:
          type: integer
          format: int64
        status:
          type: string
        createdAt:
          type: string
          format: date-time
        endedAt:
          type: string
          format: date-time
        duration:
          type: string
    Video:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        url:
          type: string
        createdAt:
          type: string
          format: date-time
      required:
        - title
        - url
tags:
  - name: Child
  - name: Homework
  - name: Move
  - name: Parent
  - name: Question
  - name: Score
  - name: Session
  - name: Video
